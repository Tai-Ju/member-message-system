# ğŸ  æœƒå“¡ç•™è¨€æ¿ç³»çµ±

<div align="center">

![Node.js](https://img.shields.io/badge/Node.js-339933?style=for-the-badge&logo=nodedotjs&logoColor=white)
![Express.js](https://img.shields.io/badge/Express.js-000000?style=for-the-badge&logo=express&logoColor=white)
![MongoDB](https://img.shields.io/badge/MongoDB-47A248?style=for-the-badge&logo=mongodb&logoColor=white)
![JavaScript](https://img.shields.io/badge/JavaScript-F7DF1E?style=for-the-badge&logo=javascript&logoColor=black)

**ä½¿ç”¨ Node.js + Express + MongoDB æ‰“é€ çš„å…¨ç«¯æœƒå“¡ç®¡ç†èˆ‡ç•™è¨€æ¿ç³»çµ±**

[åŠŸèƒ½ç‰¹è‰²](#-åŠŸèƒ½ç‰¹è‰²) â€¢ [æŠ€è¡“æ¶æ§‹](#-æŠ€è¡“æ¶æ§‹) â€¢ [å¿«é€Ÿé–‹å§‹](#-å¿«é€Ÿé–‹å§‹) â€¢ [è·¯ç”±æ–‡ä»¶](#-api-è·¯ç”±) â€¢ [å°ˆæ¡ˆçµæ§‹](#-å°ˆæ¡ˆçµæ§‹)

</div>

---

## ğŸ“– å°ˆæ¡ˆç°¡ä»‹

é€™æ˜¯ä¸€å€‹åŠŸèƒ½å®Œæ•´çš„æœƒå“¡ç®¡ç†ç³»çµ±ï¼Œæ•´åˆäº†ä½¿ç”¨è€…è¨»å†Šã€ç™»å…¥é©—è­‰ã€Session ç®¡ç†ä»¥åŠå³æ™‚ç•™è¨€æ¿åŠŸèƒ½ã€‚å°ˆæ¡ˆæ¡ç”¨ç¾ä»£åŒ–çš„å…¨ç«¯é–‹ç™¼æŠ€è¡“æ£§ï¼Œå±•ç¤ºäº†å¾å‰ç«¯åˆ°å¾Œç«¯ã€å¾è³‡æ–™åº«åˆ°éƒ¨ç½²çš„å®Œæ•´é–‹ç™¼æµç¨‹ã€‚

### ğŸ¯ é–‹ç™¼ç›®æ¨™

- å­¸ç¿’ä¸¦å¯¦è¸ **RESTful API** è¨­è¨ˆåŸå‰‡
- æŒæ¡ **MongoDB** éé—œè¯å¼è³‡æ–™åº«æ“ä½œ
- ç†è§£ **Session** èªè­‰æ©Ÿåˆ¶
- å¯¦ä½œå®Œæ•´çš„ **CRUD** æ“ä½œ
- é‹ç”¨ **EJS** æ¨¡æ¿å¼•æ“é€²è¡Œä¼ºæœå™¨ç«¯æ¸²æŸ“

---

## âœ¨ åŠŸèƒ½ç‰¹è‰²

### ğŸ” æœƒå“¡ç³»çµ±
- âœ… **ä½¿ç”¨è€…è¨»å†Š** - ä¿¡ç®±é‡è¤‡é©—è­‰æ©Ÿåˆ¶
- âœ… **å®‰å…¨ç™»å…¥** - Session ç‹€æ…‹ç®¡ç†
- âœ… **ç™»å‡ºåŠŸèƒ½** - æ¸…é™¤ä½¿ç”¨è€… Session
- âœ… **éŒ¯èª¤è™•ç†** - å‹å–„çš„éŒ¯èª¤è¨Šæ¯æç¤º

### ğŸ’¬ ç•™è¨€æ¿ç³»çµ±
- âœ… **ç™¼è¡¨ç•™è¨€** - ç™»å…¥æœƒå“¡å¯ç™¼è¡¨æ„è¦‹
- âœ… **å³æ™‚é¡¯ç¤º** - æŒ‰æ™‚é–“å€’åºæ’åˆ—
- âœ… **æœƒå“¡å°ˆå±¬** - åƒ…é™ç™»å…¥æœƒå“¡ä½¿ç”¨

### ğŸ”’ å®‰å…¨æ€§
- âœ… **ç’°å¢ƒè®Šæ•¸ç®¡ç†** - æ•æ„Ÿè³‡è¨Šèˆ‡ç¨‹å¼ç¢¼åˆ†é›¢
- âœ… **Session åŠ å¯†** - ä½¿ç”¨ Secret Key ä¿è­·
- âœ… **è·¯ç”±ä¿è­·** - æœªç™»å…¥è‡ªå‹•é‡å°å‘

---

## ğŸ›  æŠ€è¡“æ¶æ§‹

### å¾Œç«¯æŠ€è¡“
| æŠ€è¡“ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| **Node.js** | v18+ | JavaScript åŸ·è¡Œç’°å¢ƒ |
| **Express.js** | v5.1.0 | Web æ‡‰ç”¨æ¡†æ¶ |
| **MongoDB** | v6.16.0 | NoSQL è³‡æ–™åº« |
| **express-session** | v1.18.1 | Session ç®¡ç† |
| **dotenv** | latest | ç’°å¢ƒè®Šæ•¸ç®¡ç† |

### å‰ç«¯æŠ€è¡“
| æŠ€è¡“ | ç”¨é€” |
|------|------|
| **EJS** | ä¼ºæœå™¨ç«¯æ¨¡æ¿å¼•æ“ |
| **HTML5** | ç¶²é çµæ§‹ |
| **CSS3** | æ¨£å¼è¨­è¨ˆ |

### è³‡æ–™åº«è¨­è¨ˆ

#### é›†åˆï¼ˆCollectionï¼‰: `member`
```javascript
{
  _id: ObjectId,
  email: String,      // æœƒå“¡ä¿¡ç®±ï¼ˆå”¯ä¸€ï¼‰
  password: String,   // å¯†ç¢¼
  name: String,       // é¡¯ç¤ºåç¨±
  time: Number        // è¨»å†Šæ™‚é–“æˆ³è¨˜
}
```

#### é›†åˆï¼ˆCollectionï¼‰: `message`
```javascript
{
  _id: ObjectId,
  name: String,       // ç•™è¨€è€…åç¨±
  content: String,    // ç•™è¨€å…§å®¹
  time: Number        // ç•™è¨€æ™‚é–“æˆ³è¨˜
}
```

---

## ğŸš€ å¿«é€Ÿé–‹å§‹

### ç³»çµ±éœ€æ±‚

- **Node.js** v18.0.0 æˆ–æ›´é«˜ç‰ˆæœ¬
- **npm** v9.0.0 æˆ–æ›´é«˜ç‰ˆæœ¬
- **MongoDB Atlas** å¸³è™Ÿï¼ˆæˆ–æœ¬åœ° MongoDBï¼‰

### å®‰è£æ­¥é©Ÿ

#### 1ï¸âƒ£ è¤‡è£½å°ˆæ¡ˆ

```bash
git clone https://github.com/Tai-Ju/member-message-system.git
cd member-message-system
```

#### 2ï¸âƒ£ å®‰è£ä¾è³´å¥—ä»¶

```bash
npm install
```

å®‰è£çš„å¥—ä»¶åŒ…æ‹¬ï¼š
- `express` - Web æ¡†æ¶
- `mongodb` - MongoDB é©…å‹•ç¨‹å¼
- `express-session` - Session ç®¡ç†
- `ejs` - æ¨¡æ¿å¼•æ“
- `dotenv` - ç’°å¢ƒè®Šæ•¸ç®¡ç†

#### 3ï¸âƒ£ è¨­å®šç’°å¢ƒè®Šæ•¸

è¤‡è£½ `.env.example` ç‚º `.env`ï¼š

```bash
# Windows
copy .env.example .env

# macOS / Linux
cp .env.example .env
```

ç·¨è¼¯ `.env` æª”æ¡ˆï¼Œå¡«å…¥ä½ çš„è¨­å®šï¼š

```env
# MongoDB é€£ç·šå­—ä¸²ï¼ˆå¾ MongoDB Atlas å–å¾—ï¼‰
MONGODB_URI=mongodb+srv://username:password@cluster.mongodb.net/?retryWrites=true&w=majority

# Session å¯†é‘°ï¼ˆå»ºè­°ä½¿ç”¨éš¨æ©Ÿå­—ä¸²ï¼‰
SESSION_SECRET=your-random-secret-key-here

# ä¼ºæœå™¨ç«¯å£
PORT=3000
```

#### 4ï¸âƒ£ å•Ÿå‹•ä¼ºæœå™¨

```bash
node index.js
```

çœ‹åˆ°ä»¥ä¸‹è¨Šæ¯ä»£è¡¨å•Ÿå‹•æˆåŠŸï¼š

```
Database Ready
Server Started on http://127.0.0.1:3000
```

#### 5ï¸âƒ£ é–‹å•Ÿç€è¦½å™¨

è¨ªå• `http://localhost:3000` é–‹å§‹ä½¿ç”¨ï¼

---

## ğŸ“ å°ˆæ¡ˆçµæ§‹

```
member-message-system/
â”‚
â”œâ”€â”€ ğŸ“‚ public/                    # éœæ…‹è³‡æºç›®éŒ„
â”‚   â””â”€â”€ index.html               # é¦–é  HTML
â”‚
â”œâ”€â”€ ğŸ“‚ views/                     # EJS æ¨¡æ¿ç›®éŒ„
â”‚   â”œâ”€â”€ index.ejs                # ç™»å…¥/è¨»å†Šé é¢
â”‚   â”œâ”€â”€ member.ejs               # æœƒå“¡å°ˆå€é é¢
â”‚   â””â”€â”€ error.ejs                # éŒ¯èª¤è¨Šæ¯é é¢
â”‚
â”œâ”€â”€ ğŸ“„ index.js                   # ä¸»ç¨‹å¼é€²å…¥é»
â”œâ”€â”€ ğŸ“„ package.json               # å°ˆæ¡ˆè¨­å®šæª”
â”œâ”€â”€ ğŸ“„ package-lock.json          # å¥—ä»¶ç‰ˆæœ¬é–å®š
â”‚
â”œâ”€â”€ ğŸ“„ .env.example               # ç’°å¢ƒè®Šæ•¸ç¯„æœ¬
â”œâ”€â”€ ğŸ“„ .gitignore                 # Git å¿½ç•¥æ¸…å–®
â””â”€â”€ ğŸ“„ README.md                  # å°ˆæ¡ˆèªªæ˜æ–‡ä»¶
```

---

## ğŸ”Œ API è·¯ç”±

### å…¬é–‹è·¯ç”±

| æ–¹æ³• | è·¯å¾‘ | èªªæ˜ | åƒæ•¸ |
|------|------|------|------|
| `GET` | `/` | é¡¯ç¤ºé¦–é ï¼ˆç™»å…¥/è¨»å†Šï¼‰ | - |
| `POST` | `/signup` | è¨»å†Šæ–°å¸³æˆ¶ | `name`, `email`, `password` |
| `POST` | `/signin` | æœƒå“¡ç™»å…¥ | `email`, `password` |
| `GET` | `/error` | é¡¯ç¤ºéŒ¯èª¤è¨Šæ¯ | `message`ï¼ˆæŸ¥è©¢åƒæ•¸ï¼‰ |

### å—ä¿è­·è·¯ç”±ï¼ˆéœ€è¦ç™»å…¥ï¼‰

| æ–¹æ³• | è·¯å¾‘ | èªªæ˜ | åƒæ•¸ |
|------|------|------|------|
| `GET` | `/member` | æœƒå“¡å°ˆå€ï¼ˆç•™è¨€åˆ—è¡¨ï¼‰ | - |
| `POST` | `/message` | ç™¼è¡¨ç•™è¨€ | `content` |
| `GET` | `/signout` | ç™»å‡º | - |

### è«‹æ±‚ç¯„ä¾‹

#### è¨»å†Šæ–°å¸³æˆ¶
```http
POST /signup
Content-Type: application/x-www-form-urlencoded

name=å¼µä¸‰&email=test@example.com&password=123456
```

#### æœƒå“¡ç™»å…¥
```http
POST /signin
Content-Type: application/x-www-form-urlencoded

email=test@example.com&password=123456
```

#### ç™¼è¡¨ç•™è¨€
```http
POST /message
Content-Type: application/x-www-form-urlencoded
Cookie: connect.sid=...

content=é€™æ˜¯ä¸€å‰‡ç•™è¨€
```

---

## ğŸ”§ ç’°å¢ƒè®Šæ•¸èªªæ˜

| è®Šæ•¸åç¨± | å¿…å¡« | èªªæ˜ | ç¯„ä¾‹å€¼ |
|---------|------|------|--------|
| `MONGODB_URI` | âœ… | MongoDB é€£ç·šå­—ä¸² | `mongodb+srv://user:pass@cluster.mongodb.net/` |
| `SESSION_SECRET` | âœ… | Session åŠ å¯†é‡‘é‘° | `random-secret-key-12345` |
| `PORT` | âŒ | ä¼ºæœå™¨ç›£è½ç«¯å£ | `3000` (é è¨­å€¼) |

### ğŸ” å¦‚ä½•å–å¾— MongoDB é€£ç·šå­—ä¸²

1. å‰å¾€ [MongoDB Atlas](https://www.mongodb.com/cloud/atlas)
2. å»ºç«‹å…è²»çš„ Cluster
3. é»æ“Š **"Connect"** â†’ **"Connect your application"**
4. è¤‡è£½é€£ç·šå­—ä¸²ï¼Œæ›¿æ› `<username>` å’Œ `<password>`

---

## ğŸ¨ åŠŸèƒ½å±•ç¤º

### 1. è¨»å†Šæ–°å¸³æˆ¶
- å¡«å¯«å§“åã€ä¿¡ç®±ã€å¯†ç¢¼
- ç³»çµ±è‡ªå‹•æª¢æŸ¥ä¿¡ç®±æ˜¯å¦é‡è¤‡
- è¨»å†ŠæˆåŠŸå¾Œè·³è½‰è‡³ç™»å…¥é é¢

### 2. æœƒå“¡ç™»å…¥
- è¼¸å…¥ä¿¡ç®±èˆ‡å¯†ç¢¼
- é©—è­‰æˆåŠŸå¾Œå»ºç«‹ Session
- è‡ªå‹•å°å‘æœƒå“¡å°ˆå€

### 3. æœƒå“¡å°ˆå€
- é¡¯ç¤ºæ­¡è¿è¨Šæ¯ï¼ˆå«æœƒå“¡åç¨±ï¼‰
- æŸ¥çœ‹æ‰€æœ‰ç•™è¨€ï¼ˆæœ€æ–°åœ¨ä¸Šï¼‰
- ç™¼è¡¨æ–°ç•™è¨€

### 4. ç•™è¨€åŠŸèƒ½
- è¼¸å…¥ç•™è¨€å…§å®¹
- è‡ªå‹•è¨˜éŒ„ç•™è¨€æ™‚é–“
- å³æ™‚é¡¯ç¤ºåœ¨é é¢ä¸Š

### 5. ç™»å‡ºåŠŸèƒ½
- æ¸…é™¤ Session è³‡æ–™
- è¿”å›ç™»å…¥é é¢

---

## ğŸ›¡ï¸ å®‰å…¨æ€§è€ƒé‡

### å·²å¯¦ä½œ
- âœ… ç’°å¢ƒè®Šæ•¸ä¿è­·æ•æ„Ÿè³‡è¨Šï¼ˆ`.env` ä¸ä¸Šå‚³ï¼‰
- âœ… Session Secret Key åŠ å¯†
- âœ… è·¯ç”±ä¿è­·ï¼ˆæœªç™»å…¥ç„¡æ³•è¨ªå•æœƒå“¡åŠŸèƒ½ï¼‰
- âœ… ä¿¡ç®±é‡è¤‡é©—è­‰

### å»ºè­°æ”¹é€²ï¼ˆæœªä¾†ç‰ˆæœ¬ï¼‰
- ğŸ”„ å¯†ç¢¼åŠ å¯†ï¼ˆbcryptï¼‰
- ğŸ”„ CSRF ä¿è­·
- ğŸ”„ XSS é˜²è­·
- ğŸ”„ SQL/NoSQL Injection é˜²è­·
- ğŸ”„ å¯†ç¢¼å¼·åº¦é©—è­‰
- ğŸ”„ ä¿¡ç®±æ ¼å¼é©—è­‰
- ğŸ”„ é©—è­‰ç¢¼æ©Ÿåˆ¶

---

## ğŸ› å•é¡Œæ’è§£

### å•é¡Œ 1ï¼šç„¡æ³•é€£æ¥è³‡æ–™åº«
**éŒ¯èª¤è¨Šæ¯**ï¼š`MongoServerError: bad auth`

**è§£æ±ºæ–¹æ³•**ï¼š
1. æª¢æŸ¥ `.env` ä¸­çš„ `MONGODB_URI` æ˜¯å¦æ­£ç¢º
2. ç¢ºèª MongoDB Atlas çš„ IP ç™½åå–®è¨­å®š
3. æª¢æŸ¥å¸³è™Ÿå¯†ç¢¼æ˜¯å¦åŒ…å«ç‰¹æ®Šå­—å…ƒï¼ˆéœ€è¦é€²è¡Œ URL ç·¨ç¢¼ï¼‰

### å•é¡Œ 2ï¼šä¼ºæœå™¨ç„¡æ³•å•Ÿå‹•
**éŒ¯èª¤è¨Šæ¯**ï¼š`Error: Cannot find module 'express'`

**è§£æ±ºæ–¹æ³•**ï¼š
```bash
npm install
```

### å•é¡Œ 3ï¼šSession ç„¡æ³•ä¿æŒ
**å¯èƒ½åŸå› **ï¼šSession Secret æœªè¨­å®š

**è§£æ±ºæ–¹æ³•**ï¼š
ç¢ºä¿ `.env` ä¸­æœ‰è¨­å®š `SESSION_SECRET`

### å•é¡Œ 4ï¼šé€£æ¥åŸ  3000 å·²è¢«ä½”ç”¨
**éŒ¯èª¤è¨Šæ¯**ï¼š`EADDRINUSE: address already in use`

**è§£æ±ºæ–¹æ³•**ï¼š
```bash
# æ–¹æ³• 1ï¼šæ›´æ”¹ .env ä¸­çš„ PORT ç‚ºå…¶ä»–æ•¸å­—
PORT=3001

# æ–¹æ³• 2ï¼šé—œé–‰ä½”ç”¨ 3000 é€£æ¥åŸ çš„ç¨‹å¼
# Windows
netstat -ano | findstr :3000
taskkill /PID <PID> /F

# macOS / Linux
lsof -ti:3000 | xargs kill -9
```

---

## ğŸ“š å­¸ç¿’è³‡æº

### å®˜æ–¹æ–‡ä»¶
- [Node.js å®˜æ–¹æ–‡ä»¶](https://nodejs.org/docs/)
- [Express.js å®˜æ–¹æ–‡ä»¶](https://expressjs.com/)
- [MongoDB Node.js Driver](https://www.mongodb.com/docs/drivers/node/)
- [EJS æ¨¡æ¿å¼•æ“](https://ejs.co/)

### æ¨è–¦æ•™å­¸
- [Node.js å®Œæ•´æŒ‡å—](https://nodejs.dev/learn)
- [Express.js æ•™å­¸](https://developer.mozilla.org/zh-TW/docs/Learn/Server-side/Express_Nodejs)
- [MongoDB å¤§å­¸](https://university.mongodb.com/)

---


</div>
